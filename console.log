signupButton.addEventListener('click', () => {
    const firstName = firstNameInput.value;
    const lastName = lastNameInput.value;
    const email = emailInput.value;
    const password = passwordInput.value;

    console.log("Sign Up Button Clicked"); // Debugging
    console.log("First Name:", firstName); // Debugging
    console.log("Last Name:", lastName); // Debugging
    console.log("Email:", email); // Debugging
    console.log("Password:", password); // Debugging

    if (!firstName || !lastName || !email || !password) {
        authMessage.textContent = 'Please fill in all fields.';
        return;
    }

    auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            const user = userCredential.user;
            console.log("User Created:", user); // Debugging

            // Send email verification
            user.sendEmailVerification()
                .then(() => {
                    authMessage.textContent = 'Confirmation email sent. Please check your inbox.';
                    console.log("Verification Email Sent"); // Debugging
                })
                .catch((error) => {
                    authMessage.textContent = error.message;
                    console.error("Error Sending Verification Email:", error); // Debugging
                });

            // Save user details to Firestore
            db.collection('users').doc(user.uid).set({
                firstName: firstName,
                lastName: lastName,
                email: email,
                balance: 0,
                miningProgress: 0,
                emailVerified: false
            })
            .then(() => {
                console.log("User Data Saved to Firestore"); // Debugging
            })
            .catch((error) => {
                console.error("Error Saving User Data:", error); // Debugging
            });
        })
        .catch((error) => {
            authMessage.textContent = error.message;
            console.error("Error Creating User:", error); // Debugging
        });
});
